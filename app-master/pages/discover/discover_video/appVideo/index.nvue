<template>
	<view class="container">
		<!-- #ifdef APP -->
		<!--
		
		Ê≥®ÊÑèÔºöËøôÊòØ App ÊâÄÁî®È°µÈù¢ÔºåËØ∑ÂãøÂºïÂÖ•ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÊàñÊµèËßàÂô®ËøêË°åÔºåÊúÄÂ•ΩËøêË°åÂú®ÁúüÊú∫
		1. ËßÜÈ¢ëËøêË°åÂú®‰∫ëÊúçÂä°‰∏äÔºåÊú¨Âú∞Âä†ËΩΩÂæàÊÖ¢Ôºå‰ºöÂØºËá¥‰∏Ä‰∫õÈóÆÈ¢òÂá∫Áé∞„ÄÇ
		2. ËßÜÈ¢ë id ÂàáËÆ∞ÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºåÂπ∂‰∏îÊèêÂâçËΩ¨‰πâÔºÅË¶Å‰∏çÁÑ∂‰ºöÂá∫Áé∞ÈªëÂ±èÂä†ËΩΩ‰∏çÂá∫ËßÜÈ¢ë„ÄÇ
	
		 -->

		<view :style="'width: '+ windowWidth +'px; height: '+ boxStyle.height +'px;'" v-if="isShow1">
			<!-- 
			 1.ËøôÈáåÁöÑ swiper ‰∏çÊòØÁî®Êù•ÊéßÂà∂ËßÜÈ¢ëÊªëÂä®ÁöÑÔºåËÄåÊòØÁî®Êù•ÊéßÂà∂Â∑¶Âè≥ÊªëÂä®ÁöÑÔºåÂ¶ÇÊûú‰∏çÈúÄË¶ÅÁöÑÂèØ‰ª•ÊîπÊàê view
			 
			 2.‰∏∫‰∫Ü ËßÜÈ¢ëÊó†ÈôêÂä†ËΩΩÔºåÂ∑≤ÁªèÊää 21 Ë°åÁöÑ appear ÂéªÊéâ‰∫ÜÔºåÂä†‰∏ä‰∫Ü loadmore ÊñπÊ≥ïÔºàÁ¨¨10Ë°åÔºâ
			 
			 3.Áî±‰∫éÊñπÊ≥ïÊØîËæÉÂ§öÔºåÂèØ‰ª•ÈááÂèñ‰∏ãÈù¢ÁöÑÊñπÂºèÊü•Áúã‰ª£Á†ÅÔºö
			 Ôºà1ÔºâMacÔºöÊåâ‰Ωè option ÈîÆÔºåÁÑ∂ÂêéÁÇπÂáªÊñπÊ≥ïÂêçÔºåÂç≥ÂèØË∑≥ËΩ¨Âà∞ÊñπÊ≥ï
			 Ôºà2ÔºâwindowsÔºöÊåâ‰Ωè Alt ÈîÆÔºåÁÑ∂ÂêéÈº†Ê†áÂ∑¶ÂáªÔºåÂç≥ÂèØË∑≥ËΩ¨Âà∞ÊñπÊ≥ï
			 -->
			<list @loadmore="loadmores" @scroll="scrolls" :loadmoreoffset="wHeight*1" :show-scrollbar="false"
				ref="listBox" :pagingEnabled="true" :scrollable="true">
				<!-- Âà∑Êñ∞Ê®°Âùó -->
				<refresh class="refresh" @refresh="onrefresh" @pullingdown="onpullingdown"
					:display="refreshing ? 'show' : 'hide'">
					<loading style="background-color: #FFFFFF;">
						<image src="../../static/images/logins.gif"
							:style="'width: 80upx; height: 40upx; margin-top: 80upx; margin-bottom: 30upx; margin-left: '+ (windowWidth - 200) +'px;'">
						</image>
					</loading>
				</refresh>

				<!-- Âæ™ÁéØÊï∞ÊçÆ -->
				<cell v-for="(list,i) in dataList" :key="i">
					<!-- Áî®divÊääËßÜÈ¢ëÊ®°ÁªÑÂ•óËµ∑Êù• -->
					<div :style="'width: '+ windowWidth +'px; height: '+ boxStyle.height +'px;'" @disappear="stop()">
						<view v-if="Math.abs(k-i)<=1">
							<view class="root">
								<!-- 
								ÂÖ∑‰ΩìËßÜÈ¢ëÂèÇÊï∞ÂèØ‰ª•ÂèÇËÄÉÂÆòÊñπÊñáÊ°£
								ËØ¥ÊòéÔºö
								1.v-ifÂæàÂÖ≥ÈîÆÔºåËøôÈáå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂáèÂ∞ë dom ÂÖÉÁ¥†„ÄêËøôÊ†∑Êâç‰∏ç‰ºöÂä†ËΩΩËßÜÈ¢ëÂ§ö‰∫ÜÈó™ÈÄÄ„ÄëÔºå
									ËøôÈáå Math.abs(k-i)<=5 ‰πüÂ∞±ÊòØÂæÄ‰∏äÈ¢ÑÂä†ËΩΩ 5 ‰∏™ËßÜÈ¢ëÔºåÂæÄ‰∏ãÈ¢ÑÂä†ËΩΩ 5 
									‰∏™ËßÜÈ¢ëËøôÊ†∑ÂÅöÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜËÆ©ËßÜÈ¢ëËÉΩÂ§üÊèêÂâçÂä†ËΩΩ‰ΩÜÊòØ‰∏çÊí≠ÊîæÔºåÂú®ÁúüÊ≠£ÊªëÂà∞‰Ωç
									ÁΩÆÁöÑÊó∂ÂÄôÊí≠ÊîæËßÜÈ¢ë„ÄÇ
									„Äê2.0.1Â∞±ÊòØ  1  Math.abs(k-i)<=1ÔºöËØ∑Âãø‰øÆÊîπÔºåËÆ∞‰ΩèÔºåË¶Å‰∏çÁÑ∂‰ºöÊèêÂâçÊí≠ÊîæÂæàÂ§öËßÜÈ¢ë„Äë
									
								2.Ë¶ÅÊ≥®ÊÑè @play="playIngs" ÈáåÈù¢ÁöÑ playIngs ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÂè™ÊòØÂú®ËßÜÈ¢ëÊí≠ÊîæÁöÑÊó∂ÂÄô
									Ëµ∑ÊïàÊûúÔºåÊàë‰ª¨ÊéßÂà∂ËßÜÈ¢ëÊí≠Êîæ‰∏çÊòØÁî®Ëøô‰∏™ÁöÑ„ÄÇËøô‰∏™ÁöÑ‰∏ªË¶Å‰ΩúÁî®ÊòØÁªôËßÜÈ¢ëÂ∞ÅÈù¢ÁöÑ„ÄÇÊàë‰ª¨ÂÖàÁî®
									‰∏ãÈù¢ÁöÑËßÜÈ¢ëÂ∞ÅÈù¢Áõñ‰ΩèËßÜÈ¢ëÔºåÁ≠âÂà∞ËßÜÈ¢ëÊí≠ÊîæÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨‰∏çË¶ÅÊÄ•ÁùÄÁõ¥Êé•Êí≠ÊîæÔºåËÄåÊòØÂª∂Ëøü‰∏Ä‰∏ã‰∏ãÔºå
									300-600msÂ∑¶Âè≥„ÄÇÂõ†‰∏∫ËßÜÈ¢ëÊí≠ÊîæÈúÄË¶Å‰∏ÄÁÇπÁÇπÊó∂Èó¥ÔºåËøôÁÇπÊó∂Èó¥Èáå‰ºöÈªëÂ±èÔºåËøô‰∏™Êó∂ÂÄôÊàë‰ª¨Â∞±Áî®
									‰∏ãÈù¢ÁöÑÂ∞ÅÈù¢Áõñ‰ΩèÔºåËøôÊ†∑Áî®Êà∑Â∞±‰∏ç‰ºöÊúâ‰ªéÈªëÂ±èÂà∞ÊúâÁîªÈù¢ÁöÑÊÑüËßâ‰∫ÜÔºå‰ΩÜÊòØÂ¶ÇÊûúÈÅáÂà∞ËßÜÈ¢ëÂ§™Â§ßÔºåÁºìÂÜ≤
									Êó∂Èó¥Â§™ÈïøÔºåËøòÊòØ‰ºöÂá∫Áé∞Áü≠ÊöÇÁöÑÈªëÂ±èÔºåÂ§ßÈÉ®ÂàÜÊòØ‰∏ç‰ºöÊúâÈªëÂ±èÁöÑÔºàËøôÊ†∑Áõñ‰ΩèÁöÑËØùÔºâ„ÄÇ
									
									„ÄêÊõ¥Êñ∞ËÆ∞ÂΩïÔºö2.0Áâà„ÄëÂ∑≤ÁªèËß£ÂÜ≥‰∫ÜËßÜÈ¢ëÈªëÂ±èÈóÆÈ¢òÔºåÂíåÂä†ËΩΩÈÄüÂ∫¶ÊÖ¢ÁöÑÊÉÖÂÜµÔºåÂ¶ÇÊûúËøòÊòØÂá∫Áé∞‰∫ÜÈªëÂ±èÔºå
									ÊÑèÂë≥ÁùÄÊ≠§Êó∂ÊâãÊªëÂä®ÁöÑÈÄüÂ∫¶ÔºåÂ∑≤ÁªèË∂ÖËøá‰∫ÜËßÜÈ¢ëÂä†ËΩΩÁöÑÈÄüÂ∫¶ÔºåÂØπ‰∫éËøô‰∏™ÈóÆÈ¢òÔºåÂª∫ËÆÆ‰øÆÊîπ preloadNumber 
									ÂèòÈáèÔºåÂΩìÂÆÉÁöÑÂÄºÂ§ß‰∏ÄÁÇπÁöÑÊó∂ÂÄôÂ∞±‰ºöÊèêÂâçÂä†ËΩΩËßÜÈ¢ëÔºåËøôÊ†∑Áî®Êà∑Âú®ÊªëÂà∞ËßÜÈ¢ëÁöÑÊó∂ÂÄôÂ∞±‰∏ç‰ºöÊúâÂÅúÈ°øÊÑü‰∫Ü
									„ÄêÊ≥®ÊÑè„ÄëÔºöËÄÅÁî®Êà∑Âú® video ‰∏≠Â¢ûÂä†Âíå‰øÆÊîπ 
									Ôºà1Ôºâ:muted="!item.playIng"Ôºå
									Ôºà2Ôºâ@timeupdate="timeupdate($event,i)"
									Ôºà3ÔºâÊää 199 Ë°åÊ≥®Èáä‰∫ÜÔºå
									Ôºà4Ôºâ:id="item._id"Ôºå
									Ôºà5Ôºâ‰øÆÊîπÔºöuni.createVideoContext(this.dataList[this.k]._id + '' + this.k,this) ‰∏∫
										uni.createVideoContext(this.dataList[this.k]._id,this)
									Ôºà6ÔºâÂú® timeupdate ÊñπÊ≥ïÈáåÂä†ÂÖ•Ôºåif(index == this.k){ÊääÈáåÈù¢ÁöÑÂä†‰∏Ä‰∏™ÊÄªÁöÑÂà§Êñ≠}
								3.ÂÖ∂‰ªñÁöÑ‰∏ãÈù¢ÊúâËØ¶Ëß£
								 -->
								<video :ref="'list'+i" :id="list.id" :loop="true" :src="list.video" :muted="list.isplay"
									@play="playIngs(i)" :enable-progress-gesture="false" :page-gesture="false"
									:controls="false" :http-cache="true" :show-loading="false"
									:show-fullscreen-btn="false" :show-center-play-btn="false" :style="boxStyle"
									:object-fit="object_fit" @timeupdate="timeupdate($event,i)"></video>
								<!-- ËøôÈáåÊòØÂ∞ÅÈù¢ -->
								<!-- <image
								v-if="!item.playIng"
									:src="item.src+'?x-oss-process=video/snapshot,t_100,f_jpg'" 
									:mode="mode"
									:style="'width: '+ windowWidth +'px; height: '+ (wHeight - deleteHeight) +'px; position: absolute;'"
								></image> -->
								<!-- 
								mode: ÂõæÁâáË£ÅÂâ™„ÄÅÁº©ÊîæÁöÑÊ®°Âºè
								mode Êúâ 14 ÁßçÊ®°ÂºèÔºåÂÖ∂‰∏≠ 5 ÁßçÊòØÁº©ÊîæÊ®°ÂºèÔºå9 ÁßçÊòØË£ÅÂâ™Ê®°Âºè„ÄÇ
								https://uniapp.dcloud.io/component/image
								 -->
							</view>
							<!-- Áõ¥Êé•Áî® view Â∞±Ë°å‰∫ÜÔºå‰∏ÄÊ†∑ÊòØÂèØ‰ª•Ë¶ÜÁõñÂéüÁîüÁªÑ‰ª∂ÁöÑ -->
							<!-- Ëøô‰∏™ÊòØÊöÇÂÅúÊó∂Âá∫Áé∞ÁöÑÂõæÊ†á -->
							<!-- Êí≠ÊîæÁä∂ÊÄÅÔºöpause ÁöÑÊó∂ÂÄôÂ∞±‰ºöÊöÇÂÅú -->
							<view class="videoHover" @click.stop="tapVideoHover(list.state,$event)" :style="boxStyle">
								<image v-if="list.state=='pause'" class="playState" src="../../static/images/play.png">
								</image>
							</view>
							<!--ÂÆ°Ê†∏Áä∂ÊÄÅ  -->
							<view v-if="list.auditStatus == 0 || list.auditStatus == 2 || list.auditStatus == 3"
								class="video-status">
								<view v-if="list.auditStatus == 2 || list.auditStatus == 3" class="status-title">
									<image class="image" :src="urlDomain+'crmebimage/presets/weitg.png'"></image>
									<!-- <text class="iconfont icon-tishi"></text> -->
									<text class="title">{{list.auditStatus == 2 ? 'ÂÆ°Ê†∏Êú™ÈÄöËøá' : 'Âπ≥Âè∞ÂÖ≥Èó≠'}}ÔºåÂÜÖÂÆπ‰ªÖËá™Â∑±ÂèØËßÅ</text>
								</view>
								<view v-else class="status-title">
									<image class="image" :src="urlDomain+'crmebimage/presets/shen.png'"></image>
									<text class="title">Ê≠£Âú®ÂÆ°Ê†∏ÔºåÂÜÖÂÆπ‰ªÖËá™Â∑±ÂèØËßÅ</text>
								</view>
								<view class="status_info">
									<text
										class="refusal">{{(list.auditStatus == 2 || list.auditStatus == 3) ? list.refusal : 'ÂèëÂ∏ÉÁöÑÂÜÖÂÆπÂÆ°Ê†∏ÈÄöËøáÂêéÔºåÂ∞ÜÂú®È¶ñÈ°µÂ±ïÁ§∫ÔºÅ'}}</text>
								</view>
							</view>
							<!-- ÊúÄÂ∫ï‰∏ãÁöÑÊñáÂ≠óÈÉ®ÂàÜ -->
							<view v-if="isShowCent && dataList.length !== 0" class="content">
								<view class="cart">
									<text class="cartName">@{{list.authorName}}</text>
								</view>
								<view class="words mb20" :style="'width: '+ (windowWidth - 120) +'px;'">
									<view v-if="list.isMore || list.content.length<=29">
										<text class="info">{{list.content}}</text>
										<view class="close">
											<text v-if="list.isMore" class="more" @click="moreTap(list)">Êî∂Ëµ∑</text>
										</view>
									</view>
									<view class="wordsCon" v-else>
										<text class="info">{{list.content.slice(0,29)}}...</text>
										<text class="more" @click.stop="moreTap(list)">Â±ïÂºÄ</text>
									</view>
								</view>
								<view v-if="k==i && list.productList.length>0" class="product mb20">
									<scroll-view class="scroll-view" scroll-x="true"
										style="white-space: nowrap; display: flex;" scroll-with-animation>
										<view class="product-item" v-for="(goods,idx) in list.productList" :key="idx">
											<view class="item-count acea-row" @click="goDetail(goods)">
												<view class="picture">
													<image class="image" :src="goods.productImage"></image>
												</view>
												<view class="product-text">
													<text class="names line1">{{goods.productName}}</text>
													<text v-if="goods.isPay===1" class="buy">‰ΩúËÄÖ‰π∞Ëøá</text>
													<view class="product-price">
														<view class="price"><text class="sm">¬•</text><text
																class="money">{{goods.price}}</text></view>
														<text class="buy-btn">Ë¥≠‰π∞</text>
													</view>
												</view>
											</view>
										</view>
									</scroll-view>
								</view>
								<view class="topicList acea-row product_cate"
									v-if="list.topicList && list.topicList.length">
									<view class="pro-view" @click="goTopic(item.id)" v-for="item in list.topicList"
										:key="item.id">
										<text class="icon">#</text><text class="text">{{item.name}}</text>
									</view>
								</view>
							</view>
							<view v-if="isShowCent" class="userInfo">
								<!-- 1.Â§¥ÂÉè -->
								<navigator hover-class="none"
									:url="'/pages/discover/discover_user/index?id='+list.authorId" class="pictrue">
									<image class="userAvatar" :src="list.authorAvatar || urlDomain+'crmebimage/presets/morenT.png'"
										mode="aspectFill"></image>
									<view v-if="!list.isConcerned && list.authorId!==uid" class="guanzhu"
										@click.stop="followAuthor(list)">
										<text class="iconfont icon-shangpinshuliang-jia">+</text>
									</view>
									<view v-else class="yiguanzhu"><text class="iconfont"></text></view>
								</navigator>
								<!-- 2.ÁÇπËµû -->
								<view @click="likeToggle(list);" style="margin-top: 5px;" class="flex-column"
									:class="{'likeNumActive':list.userIsLike}">

									<image v-if="list.userIsLike" :src="urlDomain+'crmebimage/presets/xin.png'"
										style="width: 28px; height: 28px;"></image>
									<image v-if="!list.userIsLike" :src="urlDomain+'crmebimage/presets/xin-2.png'"
										style="width: 28px; height: 28px;"></image>
									<text class="info-text">{{list.likeNum > 0 ? list.likeNum : 'ÁÇπËµû'}}</text>
								</view>
								<!-- 3.ËØÑËÆ∫ -->
								<view v-if="list.platReplySwitch" class="comment flex-column" @click="toComment(list)"
									style="margin-top: 18px;">
									<image :src="urlDomain+'crmebimage/presets/evaluate.png'"
										style="width: 54rpx; height: 50rpx;"></image>
									<text class="info-text">{{list.replyNum>0 ? list.replyNum : 'ËØÑËÆ∫'}}</text>
								</view>
								<!-- 4.ÂàÜ‰∫´ -->
								<view v-if="list.auditStatus == 1" @click="appShare('WXSceneSession',list.id)"
									class="flex-column" style="margin-top: 17px;">
									<image :src="urlDomain+'crmebimage/presets/share-fill.png'"
										style="width: 54rpx; height: 50rpx;"></image>
									<text class="info-text">ÂàÜ‰∫´</text>
								</view>
								<!-- 5.Ëá™Â∑±ÁöÑËßÜÈ¢ë -->
								<view v-if="list.authorId == uid" style="margin-top: 17px;">
									<view class="video-my">
										<view class="video-dian" @click.stop="showManage = !showManage">
											<text class="dian"></text>
											<text class="dian"></text>
											<text class="dian"></text>
										</view>
									</view>
								</view>
								<!-- 6ÊèêÂà∞ÁöÑÂïÜÂìÅ -->
								<view v-if="list.productList.length>0 && k === i" @click.stop="openMore(list)"
									class="mention" style="opacity: 0.9; margin-top: 18px;">
									<image class="image" src="../../static/images/collection.png"></image>
									<text class="count">{{list.productList.length}}</text>
								</view>
								<!-- 7.Êî∂Ëµ∑ÂÜÖÂÆπ -->
								<view @click="onHideCent" class="flex-column"
									style="margin-top: 35rpx;align-items: center;">
									<image :src="urlDomain+'crmebimage/presets/shou.png'"
										style="width: 56rpx; height: 56rpx;"></image>
								</view>
							</view>
							<!-- 8.Â±ïÂºÄÂÜÖÂÆπ -->
							<view v-else @click="onHideCent" class="onShow">
								<image :src="urlDomain+'crmebimage/presets/zhan.png'"
									style="width: 56rpx; height: 56rpx;"></image>
							</view>

							<view class="manage" v-if="showManage">
								<navigator hover-class="none"
									:url="'/pages/discover/discover_release/index?noteId='+list.id" class="items">
									<image :src="urlDomain+'crmebimage/presets/bianji.png'"
										style="width: 16px; height: 16px;"></image>
									<text class="text">ÁºñËæë</text>
								</navigator>
								<view class="items" @click.stop="deleteTopic(list)">
									<image :src="urlDomain+'crmebimage/presets/shan.png'"
										style="width: 16px; height: 16px;"></image>
									<text class="text">Âà†Èô§</text>
								</view>
								<view class="items" @click.stop="replySwitch(list)">
									<image v-if="list.replyStatus ==1" :src="urlDomain+'crmebimage/presets/jinping.png'"
										style="width: 16px; height: 16px;"></image>
									<image v-else :src="urlDomain+'crmebimage/presets/yunping.png'"
										style="width: 16px; height: 16px;"></image>
									<text class="text">{{list.replyStatus ==1 ? 'Á¶ÅÊ≠¢ËØÑËÆ∫' : 'ÂºÄÂêØËØÑËÆ∫'}}</text>
								</view>
							</view>
							<!-- ÊúÄÂ∫ï‰∏ãÁöÑÊñáÂ≠óÈÉ®ÂàÜ -->

							<!-- 1.ËßÜÈ¢ëÈ¢ÑËßàÊó∂ÁöÑÂõæÁâáÔºåcurrenttimesÔºöÂ∞±ÊòØËé∑ÂèñÂΩìÂâçÊªëÂùóÁöÑÊó∂Èó¥ÁÇπÔºåÂ¶ÇÊûú‰∏çÈúÄË¶ÅÔºåÂèØ‰ª•Ê≥®ÈáäÊéâ -->
							<!-- 2.Â¶ÇÊûú‰ΩøÁî®‰∏ãÈù¢ÁöÑËßÜÈ¢ëÈ¢ÑËßàÁöÑËØùË¶ÅÊ≥®ÊÑèÁöÑÊòØËßÜÈ¢ëÈìæÊé•ÊúÄÂ•ΩÊòØÈòøÈáå‰∫ë‰∏äÁöÑÔºåÂõ†‰∏∫
									https://xxxxxxxxx.mp4?x-oss-process=video/snapshot,t_1000,f_jpg
									Ëøô‰∏™ÊòØÈòøÈáå‰∫ëÁöÑ‰∏úË•øÔºåËá≥‰∫éÂÖ∂‰ªñÁöÑËßÜÈ¢ëÊà™Â∏ßÊàëËøòÊ≤°ÊúâËØïËøá„ÄÇ
									-->
							<!-- 3.ÈòøÈáå‰∫ëËßÜÈ¢ëÊà™Â∏ßÂú∞ÂùÄÔºöhttps://help.aliyun.com/document_detail/64555.html -->
							<!-- <image
							v-if="item.isShowimage == true"
								:src="item.src+'?x-oss-process=video/snapshot,t_'+ currenttimes +'000,f_jpg'" 
								mode="aspectFill"
								:style="'width: 120upx; height: 160upx; border-radius: 10upx; position: absolute; bottom: '+ (ProgressBarBottom + 160) +'upx; left: '+ (currentPositions - 15) +'px;'"
							></image> -->
						</view>
					</div>
				</cell>
			</list>
			<!-- 1.Ê≥®ÊÑèÔºöËøõÂ∫¶Êù°ËøôÁ±ªÊãñÊãΩÁöÑ‰∏úË•ø‰∏çËÉΩÊîæËøõblock\cellËøô‰∫õÂæ™ÁéØ‰Ωì‰∏≠ÁöÑÔºåË¶Å‰∏çÁÑ∂touchmoveÊñπÊ≥ï‰ºöÊçïÊçâÊúâËØØ -->
			<!-- <view v-if="dataList.length !== 0 && dataList[k].isShowProgressBarTime == true" :style="'position: absolute; bottom: '+ (ProgressBarBottom + this.windowWidth*0.2)/2 +'px; left: '+ (windowWidth*2 - this.windowWidth*1.35)/2 +'px;'">
				<text style="font-size: 22px; font-weight: bold; color: #F1F1F1;">{{changeTime}} / {{videoTimes}}</text>
			</view> -->
			<!-- ËøôÈáåÂ∞±ÊòØËøõÂ∫¶Êù°‰∫ÜÔºöÁ∫ØÊâãÂ∑•ËøõÂ∫¶Êù°ÔºåË∞ÉÊï¥‰ΩçÁΩÆÁöÑËØùÂ∞±Êää‰ªñ‰ª¨ÁöÑ bottom ÊîπÊàê‰∏Ä‰∏ãÂ∞±Ë°å‰∫Ü -->

		</view>
		<!-- #endif -->
		<!-- ËØÑËÆ∫ -->
		<uni-popup type="bottom" ref="comment" @touchmove.stop.prevent="moveHandle" v-if="isShow2">
			<view
				:style="'width: '+ windowWidth +'px; height: 500px; background-color: #fff; border-top-left-radius: 10px; border-top-right-radius: 10px;'">
				<discoverComment v-if="showComment" ref="comments" :noteId="noteDetail.id" :noteDetails="noteDetail"
					@close.stop="close">
				</discoverComment>
			</view>
		</uni-popup>
		<!-- ‰ªñÊèêÂà∞ÁöÑÂÆùË¥ùÂºπÁ™ó -->
		<uni-popup type="bottom" ref="pinglunMentioned">
			<view
				:style="'width: '+ windowWidth +'px;background-color: #F5F5F5; border-top-left-radius: 10px; border-top-right-radius: 10px;'">
				<mentioned ref="mentioned" :list="proList" @close="popup"></mentioned>
			</view>
		</uni-popup>
	</view>
</template>
<script>
	import {
		HTTP_H5_URL
	} from '@/config/app.js';
	import {
		goShopDetail
	} from '@/libs/order.js'
	import {
		mapGetters
	} from "vuex";
	import {
		discoverFollowAuthor,
		discoverNoteLike
	} from '@/libs/follow.js';
	import {
		toLogin
	} from '@/libs/login.js';
	import {
		noteDetailApi,
		noteRecommendApi,
		noteReplySwitchApi,
		noteDelApi
	} from '@/api/discover.js';
	import Cache from '@/utils/cache'
	import mentioned from '@/components/mentioned.vue';
	import discoverComment from './comment.nvue';
	import util from '@/utils/util';
	import {
		Debounce
	} from '@/utils/validate.js'
	let sysHeight = uni.getSystemInfoSync().statusBarHeight;
	export default {
		computed: mapGetters(['userInfo', 'isLogin', 'uid']),
		data() {
			return {
				//‰∏ãÈù¢ÊâìüåüÂè∑ÁöÑÊòØÂøÖÈ°ªË¶ÅÁöÑÂü∫Á°ÄÂ≠óÊÆµ
				//‰∏ãÈù¢ÊâìüíóÂè∑ÁöÑÊòØÊã•ÊúâÊªëÂä®Êù°ÁöÑÂøÖÈ°ªÂ≠óÊÆµ
				dataList: [], //Áî®‰∫éÊï∞ÊçÆÂæ™ÁéØÁöÑÂàóË°®üåüüíó
				wHeight: 0, //Ëé∑ÂèñÁöÑÂ±èÂπïÈ´òÂ∫¶üåüüíó
				boxStyle: { //ËßÜÈ¢ëÔºåÂõæÁâáÂ∞ÅÈù¢Ê†∑Âºèüåüüíó
					'height': 0,
					'width': 0,
				},
				k: 0, //ÈªòËÆ§‰∏∫0üåüüíó
				playIngIds: [], //Ê≠£Âú®Êí≠ÊîæÁöÑËßÜÈ¢ëidÂàóÈòüÔºåÂàóÈòüÁî®‰∫éÂ§ÑÁêÜÊªëÂä®ËøáÂø´ÂØºËá¥ÁöÑË∑≥È¢ëÈóÆÈ¢òüåüüíó
				ready: false, //ÂèØÂøΩÁï•
				isDragging: false, //false‰ª£Ë°®ÂÅúÊ≠¢ÊªëÂä®üåüüíó
				refreshing: true, //Áî®‰∫é‰∏ãÊãâÂà∑Êñ∞üåüüíó
				windowWidth: 0, //Ëé∑ÂèñÂ±èÂπïÂÆΩÂ∫¶üåüüíó
				windowHeight: 0,
				dex: [0, 0], //Áî®‰∫éÂà§Êñ≠ÊòØ‰∏äÊªëËøòÊòØ‰∏ãÊªëÔºåÁ¨¨‰∏Ä‰∏™Â≠òÊóßÂÄºÔºåÁ¨¨‰∫å‰∏™Â≠òÊñ∞ÂÄº„ÄêÁõÆÂâçÂú®1.0.7Â∑≤ÁªèÂ∫üÂºÉ„Äë
				currents: 0, //Áî®‰∫éÂ∑¶Âè≥ÊªëÂä®Ôºå0‰ª£Ë°®ËßÜÈ¢ëÁïåÈù¢Ôºå1‰ª£Ë°®Âè≥ÊªëÁïåÈù¢üåüüíó
				platform: '', //Áî®‰∫éËé∑ÂèñÊìç‰ΩúÁ≥ªÁªüÔºöios„ÄÅandroidüåüüíó
				playIng: false, //Áî®‰∫éËßÜÈ¢ëÂàùÂßãÂåñÊó∂ÊòØÂê¶Êí≠ÊîæÔºåÈªòËÆ§‰∏çÊí≠Êîæüåüüíó
				videoTime: '', //ËßÜÈ¢ëÊÄªÊó∂ÈïøÔºåËøô‰∏™‰∏ªË¶ÅÁî®Êù•Êà™ÂèñÊó∂Èó¥Êï∞ÂÄºüíó
				videoTimes: '', //ËßÜÈ¢ëÊó∂ÈïøÔºåÁî®Ëøô‰∏™Êù•Ëé∑ÂèñÊó∂Èó¥ÂÄºÔºå‰æãÂ¶ÇÔºö00:30Ëøô‰∏™Êó∂Èó¥ÂÄºüíó
				changeTime: '', //ÊòæÁ§∫ÊªëÂä®ËøõÂ∫¶Êù°Êó∂ÂèòÂåñÁöÑÊó∂Èó¥üíó
				isShowimage: false, //ÊòØÂê¶ÊòæÁ§∫Â∞ÅÈù¢„Äê1.0.4Â∑≤Â∫üÂºÉÔºå‰ΩÜÊòØÊÑèÊÄùÈúÄË¶ÅËÆ∞‰Ωè„Äë
				currenttimes: 0, //ÂΩìÂâçÊó∂Èó¥üíó
				isShowProgressBarTime: false, //ÊòØÂê¶ÊãñÂä®ËøõÂ∫¶Êù°ÔºåÂ¶ÇÊûúÊãñÂä®ÔºàtrueÔºâÂàôÊòæÁ§∫ËøõÂ∫¶Êù°Êó∂Èó¥ÔºåÂê¶Âàô‰∏çÊòæÁ§∫ÔºàfalseÔºâ„Äê1.0.4Â∑≤Â∫üÂºÉÔºå‰ΩÜÊòØÊÑèÊÄùÈúÄË¶ÅËÆ∞‰Ωè„Äë
				ProgressBarOpacity: 0.7, //ËøõÂ∫¶Êù°‰∏çÊãñÂä®Êó∂ÁöÑÈªòËÆ§ÂÄºÔºåÂ∞±ÊòØÈÄèÊòéÁöÑüíó
				dotWidth: 0, //Êí≠ÊîæÁöÑÂ∞èÂúÜÁÇπÔºåÈªòËÆ§Ê≤°Êúâüíó
				deleteHeight: 0, //ÊµãËØïÈ´òÂ∫¶üåüüíó
				percent: 0, //ÁôæÂàÜÂ∞èÊï∞üíó
				currentPosition: 0, //ÊªëÂùóÂΩìÂâç‰ΩçÁΩÆüíó//2.0Â∑≤ÂºÉÁî®ÔºåÁé∞Â∑≤Áî®‰∫éÂêéÁ´ØÂèÇÊï∞
				currentPositions: 0, //ÊªëÂùóÂΩìÂâç‰ΩçÁΩÆÁöÑÂâØÊú¨üíó//2.0Â∑≤ÂºÉÁî®ÔºåÁé∞Â∑≤Áî®‰∫éÂêéÁ´ØÂèÇÊï∞
				newTime: 0, //Ë∑üÊâãÊªëÂä®ÂêéÁöÑÊúÄÊñ∞Êó∂Èó¥üíó
				timeNumber: 0, //üåüüíó
				ProgressBarBottom: 20, //ËøõÂ∫¶Êù°Á¶ªÂ∫ïÈÉ®ÁöÑË∑ùÁ¶ªüíó
				object_fit: 'contain', //ËßÜÈ¢ëÊ†∑ÂºèÈªòËÆ§ÂåÖÂê´üåüüíó
				mode: 'aspectFit', //ÂõæÁâáÂ∞ÅÈù¢Ê†∑Âºèüåüüíó
				timeout: "", //üåüÁî®Êù•ÈòªÊ≠¢ setTimeout()ÊñπÊ≥ï
				voice: "", //üåüÁî®Êù•ÈòªÊ≠¢ setTimeout()ÊñπÊ≥ï
				oldVideo: "",

				isAutoplay: false, //ÊòØÂê¶ÂºÄÂêØËá™Âä®Êí≠Êîæ(ÈªòËÆ§‰∏çÂºÄÂêØ)
				autoplayText: "ÂºÄÂêØËá™Âä®Êí≠Êîæ",
				timers: "",

				// ÂºïÂÖ•ËØÑËÆ∫ - ÂèÇÊï∞
				heightNum: 1.18,

				// ÂèåÂáªÁÇπËµûÂèÇÊï∞
				touchNum: 0,
				aixinLeft: 0,
				aixinTop: 0,
				isShowAixin: false,
				Rotate: 0,

				isShow1: false, //ÊéßÂà∂Ê∏≤ÊüìÂèòÈáè1
				isShow2: false, //ÊéßÂà∂Ê∏≤ÊüìÂèòÈáè2 Ôºö ‰∏ìÈó®ÊéßÂà∂ uni-popup

				showPlay: false, //ËΩ¨ËΩÆÊòæÁ§∫ÊéßÂà∂
				rotates: 0, //ËΩ¨ËΩÆÊóãËΩ¨ËßíÂ∫¶
				rotateTime: "", //ËΩ¨ËΩÆÈÄíÂΩí‰∫ã‰ª∂ÊéßÂà∂
				xrotats: "",

				noteId: 0,
				where: {
					page: 1,
					limit: 5,
					noteId: ''
				},
				showManage: false,
				isShowCent: true,
				urlDomain: Cache.get("imgHost"),
				showComment: false, //ËØÑËÆ∫ÂºπÁ™ó
				noteDetail: {}, //ËØ¶ÊÉÖ
				proList: [], //ÂïÜÂìÅÂàóË°®
				fromTo: ''
			}
		},
		components: {
			//tuiBottomPopup,
			mentioned,
			discoverComment
		},
		watch: {
			async k(k, old_k) { //ÁõëÂê¨ k ÂÄºÁöÑÂèòÂåñÔºåÂèØ‰ª•ÊéßÂà∂ËßÜÈ¢ëÁöÑÊí≠Êîæ‰∏éÊöÇÂÅú
				// Ê∏ÖÁêÜÂÆöÊó∂Âô®
				this.clearToTime();
				this.dataList[old_k].state = 'stop' //Â¶ÇÊûúÊòØË¢´ÊªëËµ∞ÁöÑËßÜÈ¢ëÔºåÂ∞±ÂÅúÊ≠¢Êí≠Êîæ
				this.dataList[old_k].playIng = false //Â¶ÇÊûúËßÜÈ¢ëÊöÇÂÅúÔºåÂ∞±Âä†ËΩΩÂ∞ÅÈù¢
				this.dataList[old_k].isplay = true
				uni.createVideoContext(this.dataList[old_k].id.toString(), this).play()
				this.oldVideo = await setTimeout(() => {
					uni.createVideoContext(this.dataList[old_k].id.toString(), this).seek(0)
					uni.createVideoContext(this.dataList[old_k].id.toString(), this).pause()
				}, 500)
				// 2.0ÁâàÊú¨Â∑≤ÁªèÂéªÊéâ‰∫Ü‰∏ãÈù¢Ëøô‰∏ÄÂè•ÔºåËßÜÈ¢ë‰∏çÁî®ÊöÇÂÅúÔºåÂè™ÈúÄË¶ÅÊääÂ£∞Èü≥Á¶ÅÊ≠¢Â∞±Ë°å
				// uni.createVideoContext(this.dataList[old_k]._id + '' + old_k,this).stop()//Â¶ÇÊûúËßÜÈ¢ëÊöÇÂÅúÔºåÈÇ£‰πàÊóßËßÜÈ¢ëÂÅúÊ≠¢ÔºåËøôÈáåÁöÑthis.dataList[old_k]._id + '' + old_kÔºåÂêéÈù¢Âä† old_k ÊòØ‰∏∫‰∫ÜÊØè‰∏Ä‰∏™ËßÜÈ¢ëÁöÑ id ÂÄº‰∏çÂêåÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Â§ßÁ®ãÂ∫¶ÁöÑÈÅøÂÖç‰∏≤Èü≥ÈóÆÈ¢ò
				this.dataList[k].state = 'play'
				uni.createVideoContext(this.dataList[k].id.toString(), this).play();
				this.xrotats = setTimeout(() => {
					this.showPlay = true;
					this.rotateX();
				}, 200)
				clearTimeout(this.voice)
				this.voice = await setTimeout(() => {
					this.dataList[k].isplay = false
				}, 300)
				await setTimeout(() => {
					this.dataList[k].playIng = true
				}, 850)
				//„Äê2.0ÁâàÊú¨Êõ¥Êñ∞ÂÜÖÂÆπ„Äë- start
				var p = k;
				if (this.loadend) return;
				++p;
				this.dataList[p].isplay = true
				await setTimeout(async () => {
					uni.createVideoContext(this.dataList[p].id.toString(), this).play()
					clearTimeout(this.timeout)
					this.timeout = await setTimeout(() => {
						uni.createVideoContext(this.dataList[p].id.toString(), this).seek(0)
						uni.createVideoContext(this.dataList[p].id.toString(), this).pause()
					}, 1500)
				}, 500)
				//„Äê2.0ÁâàÊú¨Êõ¥Êñ∞ÂÜÖÂÆπ„Äë- end
				//„ÄêÊ≠§Â§ÑÂ§ÑÁêÜËøõÂ∫¶Êù°Âç°‰ΩèÁöÑÈóÆÈ¢ò„Äë
				if (uni.getSystemInfoSync().platform !== 'ios') {
					await setTimeout(() => {
						uni.createVideoContext(this.dataList[k].id.toString(), this).pause()
						uni.createVideoContext(this.dataList[k].id.toString(), this).play()
					}, 100)
				}
			}
		},
		onShow() {
			if (this.dataList.length !== 0) {
				this.dataList[this.k].state = 'play';
				uni.createVideoContext(this.dataList[this.k].id, this).play()
			}
		},
		onHide() {
			this.dataList[this.k].state = 'pause'; //ÁïåÈù¢ÈöêËóè‰πüË¶ÅÂÅúÊ≠¢Êí≠ÊîæËßÜÈ¢ë
			uni.createVideoContext(this.dataList[this.k].id, this).pause(); //ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
		},
		onLoad(options) {
			this.noteId = options.noteId ? Number(options.noteId) : '';
			this.fromTo = options.fromTo || '';
			this.platform = uni.getSystemInfoSync().platform;
			var model = uni.getSystemInfoSync().model
			if (this.platform == 'ios' && (model !== 'iPhone6' || model !== 'iPhone6s' || model !== 'iPhone7' || model !==
					'iPhone8')) {
				this.deleteHeight = 32 //Êúâ tabbarÁöÑ ‰øÆÊîπËøôÈáåÂèØ‰ª•ÊîπÂèòËßÜÈ¢ëÈ´òÂ∫¶

				/*
				ÂºïÂÖ•ËØÑËÆ∫ÂèÇÊï∞
				*/

				this.heightNum = 1.27
			} else {
				this.deleteHeight = 0
				/*
				ÂºïÂÖ•ËØÑËÆ∫ÂèÇÊï∞
				*/
				this.heightNum = 1.18
			}
			// ÊéßÂà∂Ê∏≤Êüì -- start
			this.isShow1 = true;
			setTimeout(() => {
				this.isShow2 = true;
			}, 400)
			// ÊéßÂà∂Ê∏≤Êüì -- end
			this.windowWidth = uni.getSystemInfoSync().screenWidth //Ëé∑ÂèñÂ±èÂπïÂÆΩÂ∫¶
			this.boxStyle.width = this.windowWidth + 'px' //ÁªôÂÆΩÂ∫¶Âä†px
			this.wHeight = uni.getSystemInfoSync().screenHeight; //Ëé∑ÂèñÂ±èÂπïÈ´òÂ∫¶
			this.boxStyle.height = this.wHeight - this.deleteHeight; //ÊîπÂèòËßÜÈ¢ëÈ´òÂ∫¶
			this.get() //Ëøô‰∏ÄÊ≠•ÔºåÂä†ËΩΩËßÜÈ¢ëÊï∞ÊçÆ
			if (options.fromTo !== 'home') this.getData();
			this.rotateX();
		},
		onReady() {},
		methods: {
			// Âà†Èô§ÂÜÖÂÆπ
			deleteTopic(item) {
				let that = this;
				uni.showModal({
					content: 'Á°ÆÂÆöË¶ÅÂà†Èô§ËØ•ÂÜÖÂÆπ‰πàÔºü',
					success: function(res) {
						if (res.confirm) {
							noteDelApi(item.id).then(res => {
								util.Tips({
									title: 'Âà†Èô§ÊàêÂäü'
								});
								setTimeout(function() {
									uni.redirectTo({
										url: '/pages/discover/discover_user/index'
									})
								}, 1000);
							}).catch(err => {
								uni.showToast({
									title: err,
									icon: 'none'
								})
							});
						} else if (res.cancel) {
							console.log('Áî®Êà∑ÁÇπÂáªÂèñÊ∂à');
						}
					}
				});

			},
			//Á¶ÅÊ≠¢ËØÑËÆ∫
			replySwitch(item) {
				if (!item.platReplySwitch && item.replyStatus === 3) {
					util.Tips({
						title: 'Âπ≥Âè∞ËÆæÁΩÆ‰∏çÂèØËØÑËÆ∫'
					});
				} else {
					noteReplySwitchApi(item.id).then(res => {
						if (item.replyStatus === 1) {
							this.$set(item, 'replyStatus', 2)
							util.Tips({
								title: 'Á¶ÅÊ≠¢ÊàêÂäü'
							});
						} else {
							this.$set(item, 'replyStatus', 1)
							util.Tips({
								title: 'ÂºÄÂêØÊàêÂäü'
							});
						}
					}).catch(err => {
						uni.showToast({
							title: err,
							icon: 'none'
						})
					});
				}
			},
			//ÊâìÂºÄËØÑËÆ∫
			toComment(item, index) {
				this.noteDetail = item;
				this.showComment = true
				this.$refs.comment.open('bottom')
			},
			/*Êü•ÁúãÊèêÂà∞ÁöÑÂÆùË¥ù*/
			openMore(item) {
				this.proList = item.productList;
				this.$refs.pinglunMentioned.open('bottom');
				//this.popupShow = true;

			},
			popup() {
				this.$refs.pinglunMentioned.close();
			},
			loadmores() {
				if (options.fromTo !== 'home') this.getData();
			},
			//ÂàÜ‰∫´
			appShare(scene, id) {
				if (this.isLogin === false) {
					toLogin();
				} else {
					let that = this
					uni.showLoading({
						title: 'Âä†ËΩΩ‰∏≠',
						mask: true
					});
					let uid = this.uid ? this.uid : 0;
					let data = this.dataList[this.k];
					let routes = getCurrentPages(); // Ëé∑ÂèñÂΩìÂâçÊâìÂºÄËøáÁöÑÈ°µÈù¢Ë∑ØÁî±Êï∞ÁªÑ
					//let curRoute = routes[routes.length - 1].$page.fullPath // Ëé∑ÂèñÂΩìÂâçÈ°µÈù¢Ë∑ØÁî±Ôºå‰πüÂ∞±ÊòØÊúÄÂêé‰∏Ä‰∏™ÊâìÂºÄÁöÑÈ°µÈù¢Ë∑ØÁî±
					uni.share({
						provider: "weixin",
						scene: scene,
						type: 0,
						href: `${HTTP_H5_URL}/pages/discover/discover_video/routineVideo/index?&noteId=${id}`,
						title: data.title || '',
						summary: data.content || '',
						imageUrl: data.cover || '',
						success: function(res) {
							uni.showToast({
								title: 'ÂàÜ‰∫´ÊàêÂäü',
								icon: 'success'
							})
							uni.hideLoading();
						},
						fail: function(err) {
							uni.hideLoading();
							uni.showToast({
								title: 'ÂàÜ‰∫´Â§±Ë¥•',
								icon: 'none',
								duration: 2000
							})
						}
					});
				}
			},
			moreTap(item) {
				item.isMore = !item.isMore;
			},
			//ÂéªËØùÈ¢ò
			goTopic(id) {
				uni.navigateTo({
					url: `/pages/discover/discover_note_topic/index?topicId=${id}`
				})
			},
			//Êî∂Ëµ∑ÂÜÖÂÆπ
			onHideCent() {
				this.isShowCent = !this.isShowCent;
			},
			// ÂéªËØ¶ÊÉÖÈ°µ
			goDetail(item) {
				goShopDetail(item.productId);
			},
			//ËøîÂõû
			returns: function() {
				uni.navigateBack();
			},
			// ÂÖ≥Ê≥®‰ΩúËÄÖ
			followAuthor(item) {
				if (this.isLogin) {
					discoverFollowAuthor(item.authorId).then(() => {
						this.$set(item, 'isConcerned', !item.isConcerned);
					});
				} else {
					toLogin();
				}
			},
			//ÁÇπËµû
			likeToggle: Debounce(function(item) {
				if (this.isLogin) {
					discoverNoteLike(item.id).then(() => {
						this.$set(item, 'userIsLike', !item.userIsLike);
						if (!item.userIsLike) {
							item.likeNum--;
							item.likeNum = item.likeNum == 0 ? 0 : item.likeNum
						} else {
							item.likeNum++;
						}
					});
				} else {
					toLogin();
				}
			}),
			toBilibili() {
				// #ifdef H5
				window.open('https://www.bilibili.com/video/BV1gi4y12745')
				// #endif
			},
			selectVideo() {
				uni.navigateTo({
					url: '/pages/selectVideo/selectVideo'
				})
			},
			dealVoice() {
				uni.showToast({
					title: 'Â§ÑÁêÜÂ£∞Èü≥',
					icon: 'none'
				})
			},
			clearToTime() {
				//Ê∏ÖÁêÜÂÆöÊó∂Âô®
				for (let i = 0; i < 20; i++) {
					clearTimeout(this.rotateTime);
					clearTimeout(this.xrotats);
					this.showPlay = false;
					this.rotates = 0;
				}
			},
			clearTime() {
				//Ê∏ÖÁêÜÂÆöÊó∂Âô®
				for (let i = 0; i < 20; i++) {
					clearTimeout(this.rotateTime);
					clearTimeout(this.xrotats);
				}
			},
			rotateX() {
				// clearTimeout(this.rotateTime);
				this.rotateTime = setTimeout(() => {
					this.rotateX();
					this.rotates += 1;
				}, 30)
			},
			autoPlay() {
				this.isAutoplay = !this.isAutoplay;
				if (!this.isAutoplay) {
					this.autoplayText = "ÂºÄÂêØËá™Âä®Êí≠Êîæ"
					uni.showToast({
						title: "ÂÖ≥Èó≠Ëá™Âä®Êí≠Êîæ",
						icon: 'none',
						duration: 3000
					})
				} else {
					this.autoplayText = "ÂÖ≥Èó≠Ëá™Âä®Êí≠Êîæ"
					uni.showToast({
						title: "ÂºÄÂêØËá™Âä®Êí≠Êîæ",
						icon: 'none',
						duration: 3000
					})
				}
			},
			getData() {
				if (this.loadend) return;
				this.loading = true;
				this.where.noteId = this.noteId;
				noteRecommendApi(this.where).then(res => {
					this.loading = false;
					this.where.page = this.where.page + 1;
					this.loadend = this.where.page > res.data.totalPage;
					var msg = res.data.list
					for (let i = 0; i < msg.length; i++) {
						msg[i].id = msg[i].id.toString();
						this.dataList.push(msg[i])
					}
				}).catch(err => {
					this.loading = false;
					uni.showToast({
						title: err,
						icon: 'none'
					})
				});
			},
			touchstart(event) {
				this.dataList[this.k].isShowimage = true //ÂàöËß¶Êë∏ÁöÑÊó∂ÂÄôÂ∞±Ë¶ÅÊòæÁ§∫È¢ÑËßàËßÜÈ¢ëÂõæÁâá‰∫Ü
				this.dataList[this.k].isShowProgressBarTime = true //ÊòæÁ§∫Êó∂Èó¥Á∫ø
				this.ProgressBarOpacity = 1 //ËÆ©ÊªëÂùóÊòæÁ§∫Ëµ∑Êù•Êõ¥ÊòéÊòæ‰∏ÄÁÇπ
				this.dotWidth = 10 //ËÆ©ÁÇπÊòæÁ§∫Ëµ∑Êù•Êõ¥ÊòéÊòæ‰∏ÄÁÇπ
			},
			touchend() { //ÂΩìÊâãÊùæÂºÄÂêéÔºåË∑≥Âà∞ÊúÄÊñ∞Êó∂Èó¥
				uni.createVideoContext(this.dataList[this.k].id, this).seek(this.newTime)
				if (this.dataList[this.k].state == 'pause') {
					this.dataList[this.k].state = 'play'
					uni.createVideoContext(this.dataList[this.k].id, this).play()
				}
				this.dataList[this.k].isShowProgressBarTime = false //Ëß¶Êë∏ÁªìÊùüÂêéÔºåÈöêËóèÊó∂Èó¥Á∫ø
				this.dataList[this.k].isShowimage = false //Ëß¶Êë∏ÁªìÊùüÂêéÔºåÈöêËóèÊó∂Èó¥È¢ÑËßà
				this.ProgressBarOpacity = 0.5 //ÈöêËóèËµ∑Êù•ËøõÂ∫¶Êù°Ôºå‰∏çÈÇ£‰πàÊòéÊòæ‰∫Ü
				this.dotWidth = 0 //ÈöêËóèËµ∑Êù•ËøõÂ∫¶Êù°Ôºå‰∏çÈÇ£‰πàÊòéÊòæ‰∫Ü
			},
			touchmove(event) { //ÂΩìÊâãÁßªÂä®ÊªëÂùóÊó∂ÔºåËÆ°ÁÆó‰ΩçÁΩÆ„ÄÅÁôæÂàÜÂ∞èÊï∞„ÄÅÊñ∞ÁöÑÊó∂Èó¥
				var msg = []
				if (this.videoTime !== '') {
					msg = this.videoTime.split(':')
				}
				var timeNumber = Number(msg[0]) * 60 + Number(msg[1])
				this.currentPositions = event.changedTouches[0].screenX
				this.percent = this.currentPositions / this.windowWidth
				this.newTime = this.percent * timeNumber
				this.currenttimes = parseInt(this.newTime)
				let theTime = this.newTime
				let middle = 0; // ÂàÜ
				if (theTime > 60) {
					middle = parseInt(theTime / 60);
					theTime = parseInt(theTime % 60);
				}
				this.changeTime =
					`${Math.round(middle)>9?Math.round(middle):'0'+Math.round(middle)}:${Math.round(theTime)>9?Math.round(theTime):'0'+Math.round(theTime)}`
			},
			timeupdate(event, index) { //ËÆ°ÁÆóÊªëÂùóÂΩìÂâç‰ΩçÁΩÆÔºåËÆ°ÁÆóÂΩìÂâçÁôæÂàÜÂ∞èÊï∞
				if (index == this.k) {
					var currenttime = event.detail.currentTime
					this.timeNumber = Math.round(event.detail.duration)
					this.getTime()
					this.percent = currenttime / this.timeNumber
					this.currentPosition = this.windowWidth * this.percent
					let theTime = currenttime
					let middle = 0; // ÂàÜ
					if (theTime > 60) {
						middle = parseInt(theTime / 60);
						theTime = parseInt(theTime % 60);
					}
					this.changeTime =
						`${Math.round(middle)>9?Math.round(middle):'0'+Math.round(middle)}:${Math.round(theTime)>9?Math.round(theTime):'0'+Math.round(theTime)}`
					//Ëá™Âä®ÂàáÊç¢ËßÜÈ¢ë
					if (this.isAutoplay) { //true,‰ª£Ë°®Ëá™Âä®Êí≠Êîæ
						if (Math.round(currenttime) == this.timeNumber - 1) {
							const dom = uni.requireNativePlugin('dom')
							let doms = 'item' + (this.k + 1)
							setTimeout(() => {
								let el = this.$refs[doms][0]
								dom.scrollToElement(el, {
									offset: 0,
									animated: true
								})
							}, 500)
						}
					}
				}
			},
			getTime() { //ÂæóÂà∞Êó∂Èó¥ÂáΩÊï∞
				this.videoTime = this.formatSeconds(this.timeNumber);
				var msg = []
				if (this.videoTime !== '') {
					msg = this.videoTime.split(':')
				}
				this.videoTimes = `${msg[0]>9?msg[0]:'0'+msg[0]}:${msg[1]>9?msg[1]:'0'+msg[1]}`;
			},
			formatSeconds(value) { //Ëé∑ÂèñÊó∂Èó¥ÂáΩÊï∞
				let theTime = parseInt(value); // Áßí
				let middle = 0; // ÂàÜ
				if (theTime > 60) {
					middle = parseInt(theTime / 60);
					theTime = parseInt(theTime % 60);
				}
				return `${middle>9?middle:middle}:${theTime>9?theTime:theTime}`;
			},
			playIngs(index) {
				//
			},
			tozuozhe() {
				this.currents = 1 //ÁÇπÂáªÂ§¥ÂÉè‰ª•ÂêéÂ∞±‰ºöÂàáÊç¢
			},
			stop() {
				// console.log('stop')
			},
			scrolls(event) {
				this.isDragging = event.isDragging
				if (!event.isDragging) { //isDraggingÔºöÂà§Êñ≠Áî®Êà∑ÊòØ‰∏çÊòØÂú®ÊªëÂä®ÔºåÊªëÂä®ÔºötrueÔºåÂÅúÊ≠¢ÊªëÂä®Ôºöfalse„ÄÇÊàë‰ª¨Ë¶ÅÁî®Êà∑ÂÅúÊ≠¢ÊªëÂä®Êó∂ÊâçÁªô k ËµãÂÄºÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÈÅøÂÖçÂæàÂ§öÈ∫ªÁÉ¶
					var i = Math.round(Math.abs(event.contentOffset.y) / (this.wHeight - this.deleteHeight +
						1)) //ÂÖàÁî®ÁªùÂØπÂÄºÂèñÂá∫ÊªëÂä®ÁöÑË∑ùÁ¶ªÔºåÁÑ∂ÂêéÈô§‰ª•Â±èÂπïÈ´òÂ∫¶ÔºåÂèñ‰∏Ä‰∏™Êï¥ÔºåÂ∞±Áü•ÈÅì‰Ω†Áé∞Âú®ÊªëÂä®Âà∞Âì™‰∏Ä‰∏™ËßÜÈ¢ë‰∫Ü
					if (i !== this.k) { //ËøôÈáåÂä†Âà§Êñ≠ÊòØÂõ†‰∏∫Ëøô‰∏™ÊñπÊ≥ï‰ºöÊâßË°åÂæàÂ§öÊ¨°Ôºå‰ºöÈÄ†ÊàêÈáçÂ§çËØ∑Ê±ÇÔºåÊâÄ‰ª•ËøôÈáåÂÜô‰∏Ä‰∏™ÈôêÂà∂
						if (uni.getSystemInfoSync().platform == 'ios') {
							this.k = i //Âà§Êñ≠‰∫ÜÁî®Êà∑Ê≤°ÊúâÊªëÂä®ÔºåÁ°ÆËÆ§‰∫ÜÁî®Êà∑ÁöÑÁ°ÆÊòØÂú®ÁúãËøô‰∏™ËßÜÈ¢ëÔºåÁÑ∂ÂêéÂ∞±ËµãÂÄºÂï¶
							this.dataList[this.k].state = 'play'
						} else {
							clearTimeout(this.timers);
							this.timers = setTimeout(() => {
								this.k = i //Âà§Êñ≠‰∫ÜÁî®Êà∑Ê≤°ÊúâÊªëÂä®ÔºåÁ°ÆËÆ§‰∫ÜÁî®Êà∑ÁöÑÁ°ÆÊòØÂú®ÁúãËøô‰∏™ËßÜÈ¢ëÔºåÁÑ∂ÂêéÂ∞±ËµãÂÄºÂï¶
								this.dataList[this.k].state = 'play'
							}, 80)
						}
					}
				}
			},
			get() {
				noteDetailApi(this.noteId).then(async (res) => {
					this.noteDetail = res.data
					res.data.id = res.data.id.toString()
					this.noteDetail.id = this.noteDetail.id.toString()
					this.loading = false
					this.dataList.push(res.data)
					this.dataList[0].state = "play";
					await setTimeout(() => {
						//ËøôÈáåÁöÑÂª∂ËøüÊòØ‰∏∫‰∫ÜÈÅøÂÖçÊâßË°åÊó∂Èó¥Â§™Âø´ËÄåÁõ¥Êé•Ë∑≥ËøáÊâßË°åÁöÑ bug
						uni.createVideoContext(this.dataList[0].id.toString(), this).seek(0)
						uni.createVideoContext(this.dataList[0].id.toString(), this).play()
					}, 200)
					this.dataList[0].isplay = false
					await setTimeout(() => {
						this.dataList[0].playIng = true
					}, 500)
					var p = 0;
					this.showPlay = true;
				}).catch(err => {
					uni.showToast({
						title: err,
						icon: 'none'
					})
				});
			},
			onpullingdown() {
				this.refreshing = true
			},
			onrefresh() {
				setTimeout(() => {
					this.refreshing = false
				}, 1000)
			},
			// ÂèåÂáªÁÇπËµûÊïàÊûú
			touchstartHover(event) {
				if (this.touchNum >= 1) {
					// console.log('ÂèåÂáª -- XÂùêÊ†áÔºö'+ event.touches[0].screenX);
					// console.log('ÂèåÂáª -- YÂùêÊ†áÔºö'+ event.touches[0].screenY);
					this.aixinLeft = event.touches[0].screenX - 50;
					this.aixinTop = event.touches[0].screenY - 50;
					this.isShowAixin = true;
					let max = 40;
					let min = -40;
					this.Rotate = Math.floor(Math.random() * (max - min + 1)) + min;
					setTimeout(() => {
						this.isShowAixin = false;
					}, 700)
					this.onTabItemTaps();
				}
			},
			//ÁÇπÂáªÊí≠Êîæ&&ÊöÇÂÅú
			tapVideoHover(state, event) {
				this.dataList[this.k].isShowimage = false
				this.dataList[this.k].isShowProgressBarTime = false
				this.ProgressBarOpacity = 0.5
				this.dotWidth = 0
				// 1.ÂêØÁî®ÂèåÂáªÁÇπËµû --- start
				this.touchNum++;
				setTimeout(() => {
					if (this.touchNum == 1) {
						if (state == 'play' || state == 'continue') {
							this.dataList[this.k].state = 'pause';
						} else {
							this.dataList[this.k].state = 'continue';
						}
						if (this.dataList[this.k].state == 'continue') {
							uni.createVideoContext(this.dataList[this.k].id, this).play(); //ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
							this.clearTime();
							setTimeout(() => {
								this.rotateX();
							}, 50)
						}
						if (this.dataList[this.k].state == 'pause') {
							uni.createVideoContext(this.dataList[this.k].id, this).pause(); //ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
							this.clearTime();
						}
					}
					if (this.touchNum >= 2) {
						this.doubleLike();
					}
					this.touchNum = 0;
				}, 200)
				// --------------- ending
				// 2. ‰∏çÂêØÁî®ÂèåÂáªÁÇπËµû start
				// if(state=='play'||state=='continue'){
				// 	this.dataList[this.k].state = 'pause';
				// }else{
				// 	this.dataList[this.k].state = 'continue';
				// }
				// if(this.dataList[this.k].state == 'continue'){
				// 	uni.createVideoContext(this.dataList[this.k]._id,this).play();//ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
				// }
				// if(this.dataList[this.k].state == 'pause'){
				// 	uni.createVideoContext(this.dataList[this.k]._id,this).pause();//ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
				// }
				// --------------- ending
			},
			doubleLike() {
				if (this.dataList[this.k].like == false) {
					this.dataList[this.k].like_n += 1;
					this.dataList[this.k].like = true;
				}
				/*
				ÁÇπËµû
				*/
			},
			//ÂÖ≥Èó≠ËØÑËÆ∫
			close() {
				this.$refs.comment.close();
			},
			share() {
				uni.showToast({
					title: 'ÂàÜ‰∫´',
					icon: 'none'
				})
			},
			wxh5Video() {
				uni.navigateTo({
					url: '../wxh5previewVideo/wxh5previewVideo'
				})
			},
			previewVideo() {
				uni.navigateTo({
					url: '../previewVideo/previewVideo'
				})
			},
			toTwoVideo() {
				uni.navigateTo({
					url: '../new_index/new_index'
				})
			},
			tolistVideo() {
				uni.navigateTo({
					url: '../nvueSwiper/nvueSwiper'
				})
			},
			moveHandle() {},
			onTabItemTaps() {
				// #ifdef APP-PLUS
				if (uni.getSystemInfoSync().platform == "ios") {
					let UIImpactFeedbackGenerator = plus.ios.importClass('UIImpactFeedbackGenerator');
					let impact = new UIImpactFeedbackGenerator();
					impact.prepare();
					impact.init(1);
					impact.impactOccurred();
				}
				if (uni.getSystemInfoSync().platform == "android") {
					uni.vibrateShort({
						success: () => {
							console.log('ÁÇπÂáªÈúáÂä®');
						}
					});
				}
				// #endif
			}
		}
	}
</script>
<style lang="scss" scoped>
	.onShow {
		position: absolute;
		bottom: 55rpx;
		right: 40rpx;
	}

	.mb20 {
		margin-bottom: 20rpx;
	}

	.line1 {
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
		//display: inline-block;
	}

	.names {
		font-size: 24rpx;
		width: 286rpx;
		color: #fff;
		height: 30rpx;
		lines: 1;
		text-overflow: ellipsis;
	}

	.product_cate {
		flex-direction: row;
		flex-wrap: wrap;

		.pro-view {
			margin-bottom: 20rpx;
			flex-direction: row;
			align-items: center;
			border-radius: 30rpx;
			padding: 0 25rpx;
			line-height: 62rpx;
			height: 62rpx;
			margin-right: 14rpx;
			border-radius: 29rpx;
			border: 1rpx solid #ffffff;

			.text {
				color: #ffffff;
				font-size: 24rpx;
			}

			.icon {
				font-size: 26rpx;
				font-weight: bold;
				margin-right: 8rpx;
				color: #ffffff;
			}
		}
	}

	.noVideo {
		position: fixed;
		top: 400rpx;
		z-index: 9;
		width: 750rpx;
		flex-direction: row;
		justify-content: center;

		.pictrue {
			width: 414rpx;
			height: 256rpx;
		}

		.tips {
			text-align: center;
			margin-top: 14rpx;
			font-size: 26rpx;
			color: #999;
		}
	}

	// .container {background: #000000;}
	.item {
		position: relative;
	}

	.videoHover {
		position: absolute;
		top: 0;
		left: 0;
		flex: 1;
		background-color: rgba(0, 0, 0, 0.1);
		justify-content: center;
		align-items: center;
	}

	.playState {
		width: 160rpx;
		height: 160rpx;
		opacity: 0.2;
	}

	.video-status {
		width: 690rpx;
		position: absolute;
		left: 30rpx;
		background: rgba(0, 0, 0, .55);
		border-radius: 10rpx;
		top: 150rpx;
		padding: 30rpx;

		.status-title {
			flex-direction: row;
			align-items: center;

			.title {
				margin-left: 20rpx;
				color: #ffffff;
				font-size: 28rpx;
			}
		}

		.refusal {
			color: #ffffff;
			font-size: 22rpx;
			margin: 15rpx 0 0 48rpx;
		}

		.image {
			width: 28rpx;
			height: 28rpx;
		}
	}

	.userInfo {
		position: absolute;
		bottom: 30px;
		right: 10px;
		display: flex;
		align-items: center;
		flex-direction: column;

		.pictrue {
			flex-direction: column;
			justify-content: center;
			align-items: center;
			position: relative;

			// margin-bottom: 18rpx;
			.guanzhu {
				width: 42rpx;
				height: 42rpx;
				display: flex;
				align-items: center;
				justify-content: center;
				color: #fff;
				background: #E93323;
				border-radius: 100%;
				position: relative;
				top: -20rpx;
				left: 3rpx;

				.iconfont {
					font-size: 30rpx;
					color: #fff;
				}
			}

			.yiguanzhu {
				width: 42rpx;
				height: 42rpx;
			}
		}
	}

	.video-my {
		position: relative;
		align-items: center;
		justify-content: center;
		flex-direction: row;

	}

	.video-dian {
		position: relative;
		width: 33px;
		height: 33px;
		align-items: center;
		justify-content: center;
		flex-direction: row;
		left: 3px;

		.dian {
			width: 7px;
			height: 7px;
			background-color: #fff;
			border-radius: 100%;
			margin-right: 3px;

			&:last-child {
				margin-right: 0;
			}
		}
	}

	.manage {
		width: 115px;
		background: #ffffff;
		box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
		padding: 0 8px;
		position: absolute;
		bottom: 10px;
		right: 60px;
		border-radius: 8px;

		.manage-gou {
			display: flex;
			width: 13px;
			height: 13px;
			background: #ffffff;
			transform: rotate(140deg);
			position: absolute;
			top: 30px;
			right: -6px;
			box-shadow: -1px -1px 1px rgba(0, 0, 0, 0.05);
		}

		.items {
			border-bottom: 1px solid #EEEEEE;
			padding: 10px 0;
			display: flex;
			align-items: center;
			flex-direction: row;

			.text {
				color: #282828;
				font-size: 13px;
				margin-left: 20rpx;
			}

			&:last-child {
				border-bottom-color: transparent;
			}

			.image {
				width: 32rpx;
				height: 32rpx;
				margin: 0 16rpx 0;
			}
		}
	}

	.userAvatar {
		border-radius: 500%;
		border-style: solid;
		border-width: 2px;
		border-color: #ffffff;
		width: 80rpx;
		height: 80rpx;
	}

	.info-text {
		display: flex;
		margin-top: 10rpx;
		color: #ffffff;
		font-size: 22rpx;
		text-align: center;

		&.likeNumActive {
			color: #E93323;
		}
	}

	.likeIco,
	.shareIco,
	.commentIco {
		width: 60rpx;
		height: 60rpx;
		margin-top: 15px;
	}

	.likeNum,
	.commentNum,
	.shareTex {
		color: #ffffff;
		font-size: 30rpx;
		text-align: center;
		margin: 5px;
	}

	.mention {
		width: 46px;
		height: 46px;
		position: relative;
		bottom: 0;

		.image {
			width: 30px;
			height: 30px;
			position: absolute;
			right: 8px;
		}

		.count {
			padding: 2px 6px;
			background: #fff;
			border-radius: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			color: #E93323;
			position: absolute;
			right: 6px;
			top: 0;
			font-size: 10px;
		}
	}

	.content {
		width: 590rpx;
		position: absolute;
		bottom: 20px;
		/* justify-content: center; */
		padding: 15rpx;
		flex-direction: column;
		justify-content: flex-start;
		color: #ffffff;

		.cart {
			height: 48rpx;
			flex-direction: row;

			.cartName {
				font-size: 24rpx;
				color: #fff;

			}
		}

		.product {
			flex-direction: row;
			margin-bottom: 20rpx;

			.scroll-view {
				flex-direction: row;
			}

			.product-item {
				width: 444rpx;
				height: 136rpx;
				background: rgba(0, 0, 0, .55);
				border-radius: 12rpx;
				padding: 16rpx 15rpx;
				margin-right: 30rpx;
			}

			.item-count {
				font-size: 20rpx;
				flex-direction: row;
				justify-content: space-between;

				.picture {
					width: 104rpx;
					height: 104rpx;
					border-radius: 10rpx;

					.image {
						width: 104rpx;
						height: 104rpx;
						border-radius: 10rpx;
					}
				}

				.names {
					font-size: 24rpx;
					width: 286rpx;
					color: #fff;
				}

				.product-text {
					width: 286rpx;
					justify-content: space-between;

					.buy {
						padding: 4rpx 7rpx;
						background: #5D5747;
						border-radius: 3px 3px 3px 3px;
						font-size: 16rpx;
						display: inline-block;
					}

					.product-price {
						display: flex;
						flex-direction: row;
						justify-content: space-between;
						align-items: center;

						.price {
							display: flex;
							flex-direction: row;

							.sm,
							.money {
								color: #ffffff;
								font-size: 24rpx;
							}
						}

						.buy-btn {
							padding: 6rpx 20rpx;
							// display: flex;
							// align-items: center;
							// justify-content: center;
							color: #fff;
							border-radius: 26rpx;
							background: #E93323;
							font-size: 20rpx;
						}
					}
				}
			}
		}
	}

	.timeCon {
		flex-direction: row;
		align-items: center;

		.userName {
			font-size: 30rpx;
			color: #ffffff;
		}
	}

	.words {
		margin-top: 20rpx;

		.close {
			display: flex;
			flex-direction: row;
			align-items: center;
			justify-content: flex-end;
			margin-right: 20rpx;

			.imgClose {
				width: 18rpx;
				height: 10rpx;
				margin-left: 10rpx;
			}
		}

		.wordsCon {
			position: relative;

			.more {
				position: absolute;
				bottom: 0;
				right: 40rpx;
				font-size: 26rpx;
				color: #ffffff;
				font-weight: bold;
			}

			.img {
				width: 18rpx;
				height: 10rpx;
				margin-left: 4rpx;
				position: absolute;
				bottom: 7rpx;
				right: 20rpx;
			}
		}

		.info {
			color: #fff;
			font-size: 28rpx;
		}

		.more {
			font-size: 26rpx;
			color: #ffffff;
			font-weight: bold;
		}
	}

	.root {
		background-color: #000000;
	}
</style>